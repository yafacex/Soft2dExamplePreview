window.__require=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!a&&p)return p(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return r(e[s][1][t]||t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)r(i[s]);return r}({ClothAssembler:[function(t,e,n){"use strict";function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}cc._RF.push(e,"88bd11KEyNB87bdPzuUseov","ClothAssembler"),n.__esModule=!0,n.default=void 0;var a=t("./ClothRenderComp"),c=function(t){var e,n;function r(){var e;return(e=t.call(this)||this)._nGridHorizon=-1,e._nGridVertical=-1,e.floatsPerVert=5,e.verticesCount=0,e.indicesCount=0,e.uvOffset=2,e.colorOffset=4,e._renderData=null,e._mp_arr=[],e._pinCons=[],e._distCons=[],e._posCons=[],e._renderData=new cc.RenderData,e._renderData.init(s(e)),e._renderData.createFlexData(0,8,18),e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=r.prototype;return o.init=function(e){t.prototype.init.call(this,e)},o.setPin=function(t,e,n,i,r,o,s,a){if(this._nGridHorizon>0&&this._nGridVertical>0&&this._mp_arr.length>0){this._pinCons=[];var c,p=this._mp_arr;if(n&&(c=this._mp_arr[0][0],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)})),i&&(c=this._mp_arr[0][this._nGridHorizon-1],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)})),t&&(c=this._mp_arr[this._nGridVertical-1][0],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)})),e&&(c=this._mp_arr[this._nGridVertical-1][this._nGridHorizon-1],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)})),r)for(var u=0;u<this._nGridVertical;++u)c=p[u][0],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)});if(o)for(var l=0;l<this._nGridVertical;++l)c=p[l][this._nGridHorizon-1],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)});if(s)for(var d=0;d<this._nGridHorizon;++d)c=p[this._nGridVertical-1][d],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)});if(a)for(var h=0;h<this._nGridHorizon;++h)c=p[0][h],this._pinCons.push({mp:c,pin_pt:new cc.Vec2(c.p.x,c.p.y)})}},o.updateColor=function(t,e){var n=this._renderData._flexBuffer;if(n){var i=n.uintVData;if(!i)return;e=null!=e?e:t.node.color._val;for(var r=this.floatsPerVert,o=this.colorOffset,s=i.length;o<s;o+=r)i[o]=e}},o.setGridSize=function(t,e){if(t>1&&e>1){this._nGridHorizon=t,this._nGridVertical=e;var n=this._renderComp;if(null!=n.texture){var i=new cc.Size(n.texture.width,n.texture.height),r=new cc.Size(i.width*n.node.scaleX,i.height*n.node.scaleY),o=this._renderData._flexBuffer,s=t*e*2,a=(this._nGridHorizon-1)*(this._nGridVertical-1)*6;this.verticesCount=s,o.reserve(s,a),this._mp_arr=[];var c,p=this._mp_arr,u=n.node.getAnchorPoint(),l=new cc.Vec2(-r.width*u.x,-r.height*u.y),d=new cc.Vec2(r.width*(1-u.x),r.height*(1-u.y));n.node.setContentSize(i);for(var h=0;h<this._nGridVertical;++h){p[h]=c=[];for(var f=0;f<this._nGridHorizon;++f){var _=h/(this._nGridVertical-1),y=f/(this._nGridHorizon-1),v=new cc.Vec2(l.x*(1-y)+d.x*y,l.y*(1-_)+d.y*_),m=n.node.convertToWorldSpaceAR(v);c.push({wp:m,p:v,last_p:new cc.Vec2(m.x,m.y),exF:new cc.Vec2(0,0),v:new cc.Vec2(0,0),stiff:n.stiffness,c:f,r:h,_c:(f+1)/this._nGridHorizon,_r:(h+1)/this._nGridVertical})}}this.calcWorldPoints(),this.updateIndices(),this.addDistCon(),this.addPosCon(n),this.setPin(n.fixTL,n.fixTR,n.fixBL,n.fixBR,n.fixLeft,n.fixRight,n.fixTop,n.fixBottom)}}},o.addDistCon=function(){this._distCons=[];for(var t,e,n,i,r,o,s=this._mp_arr,a=0;a<this._nGridVertical;++a){r=s[a];for(var c=0;c<this._nGridHorizon;++c)t=r[c],c>0&&(e=r[c-1],i=t.wp.sub(e.wp).len(),o=t.wp.sub(e.wp),this._distCons.push({mp1:t,mp2:e,dis:i,rpos:o})),a<this._nGridVertical-1&&(n=s[a+1][c],i=t.wp.sub(n.wp).len(),o=t.wp.sub(n.wp),this._distCons.push({mp1:t,mp2:n,dis:i,rpos:o}))}},o.addPosCon=function(t){this._posCons=[];var e,n,i,r=this._mp_arr,o=Math.sqrt,s=t.keepShape,a=function(e){return(e*(1-t.keepShapeMin)+t.keepShapeMin)*t.keepShape};if(t.fixTop)for(var c=0;c<this._nGridHorizon;++c)for(var p=this._nGridVertical-1;p>=1;--p)n=r[p][c],i=(e=r[p-1][c]).p.sub(n.p),0==t.keepFunc?s=a(s=p/(this._nGridVertical-1)):2==t.keepFunc&&(s=a(s=o(s=p/(this._nGridVertical-1))*t.keepShape)),this._posCons.push({mp:e,pmp:n,dp:i,el:s});if(t.fixBottom)for(var u=0;u<this._nGridHorizon;++u)for(var l=0;l<this._nGridVertical-1;++l)n=r[l][u],i=(e=r[l+1][u]).p.sub(n.p),0==t.keepFunc?s=a(s=l/(this._nGridVertical-1)):2==t.keepFunc&&(s=a(s=o(s=1-l/(this._nGridVertical-1)))),this._posCons.push({mp:e,pmp:n,dp:i,el:s});if(t.fixLeft)for(var d,h=0;h<this._nGridVertical;++h){d=r[h];for(var f=1;f<this._nGridHorizon;++f)n=d[f-1],i=(e=d[f]).p.sub(n.p),0==t.keepFunc?s=a(s=1-f/(this._nGridHorizon-1)):2==t.keepFunc&&(s=a(s=o(s=1-f/(this._nGridHorizon-1)))),this._posCons.push({mp:e,pmp:n,dp:i,el:s})}if(t.fixRight)for(var _,y=0;y<this._nGridVertical;++y){_=r[y];for(var v=this._nGridHorizon-2;v>=0;--v)n=_[v+1],i=(e=_[v]).p.sub(n.p),0==t.keepFunc?s=a(s=v/(this._nGridHorizon-1)):2==t.keepFunc&&(s=a(s=o(s=v/(this._nGridHorizon-1)))),this._posCons.push({mp:e,pmp:n,dp:i,el:s})}},o.updateRenderData=function(t){this._renderData._flexBuffer&&t.texture&&this._mp_arr.length>0&&this.updateWorldVerts(t)},o.updateIndices=function(){var t=this._renderData._flexBuffer;if(t)for(var e,n,i,r,o=0,s=t.iData,a=0;a<this._nGridVertical-1;++a)for(var c=0;c<this._nGridHorizon-1;++c)e=a*this._nGridHorizon+c,n=a*this._nGridHorizon+c+1,i=(a+1)*this._nGridHorizon+c,r=(a+1)*this._nGridHorizon+c+1,s[o++]=e,s[o++]=n,s[o++]=i,s[o++]=i,s[o++]=n,s[o++]=r},o.updateWorldVerts=function(){var t=this._renderData._flexBuffer;if(t){for(var e,n=t.vData,i=t.uintVData,r=this.floatsPerVert,o=0,s=(new cc.Vec2(0,0),new cc.Vec2(0,0),this._mp_arr),a=0;a<this._nGridVertical;++a)for(var c=0;c<this._nGridHorizon;++c){var p=a/(this._nGridVertical-1),u=c/(this._nGridHorizon-1);e=s[a][c].wp,n[o]=e.x,n[o+1]=e.y,n[o+2]=u,n[o+3]=1-p,i[o+4]=4294967295,o+=r}var l=this._nGridHorizon*this._nGridVertical*2,d=(this._nGridHorizon-1)*(this._nGridVertical-1)*6;this.verticesCount=l,this.indicesCount=d,t.used(l,d)}},o.calcWorldPoints=function(){for(var t,e=this._renderComp,n=this._pinCons,i=0;i<n.length;++i){t=n[i].mp;var r=e.node.convertToWorldSpaceAR(t.p);t.wp.x=r.x,t.wp.y=r.y}},o.fillBuffers=function(t){var e=this._renderData._flexBuffer;if(e&&t.texture&&this._mp_arr.length>0){var n=e.vData,i=e.usedVertices,r=e.usedIndices,o=e.usedVerticesFloats,s=cc.renderer._handle._meshBuffer,a=s.request(i,r),c=a.byteOffset>>2,p=s._vData;n.length+c>p.length?(cc.log("over length"),p.set(n.subarray(0,o),c)):p.set(n.subarray(0,o),c);for(var u=s._iData,l=a.indiceOffset,d=a.vertexOffset,h=e.iData,f=0,_=h.length;f<_;++f)u[l++]=d+h[f];t.node._renderFlag|=cc.RenderFlow.FLAG_UPDATE_RENDER_DATA}},o.update=function(t){this.iterate(t,.017),this.dealDistCon(t,.017),this.dealPosCon(t,.017),this.dealPinCon(),this.calcWorldPoints()},o.dealDistCon=function(t){for(var e,n,r,o,s,a,c,p,u,l,d=Math.sqrt,h=t.iterateTimes,f=.5/h,_=0;_<h;++_)for(var y,v=i(this._distCons);!(y=v()).done;){var m=y.value;e=m.mp1,n=m.mp2,r=e.wp,o=n.wp,s=d((u=r.x-o.x)*u+(l=r.y-o.y)*l),c=u*(a=(a=(m.dis-s)/s)*(e.stiff+n.stiff)*f),p=l*a,r.x=r.x+c,r.y=r.y+p,o.x=o.x-c,o.y=o.y-p}},o.dealPosCon=function(t){for(var e,n,r,o,s,a,c,p=t.iterateTimes,u=1/p,l=cc.Vec2.transformMat4,d=t.node._worldMatrix,h=new cc.Vec2(0,0),f=0;f<p;++f)for(var _,y=i(this._posCons);!(_=y()).done;){var v=_.value;e=v.mp,n=v.pmp,e.p.x=n.p.x+v.dp.x,e.p.y=n.p.y+v.dp.y,l(h,e.p,d),a=h.x-e.wp.x,c=h.y-e.wp.y,o=a*(r=v.el*u),s=c*r,e.wp.x+=o,e.wp.y+=s}},o.dealPinCon=function(){for(var t,e,n,r=i(this._pinCons);!(n=r()).done;){var o=n.value;t=o.mp.wp,e=o.pin_pt,t.x=e.x,t.y=e.y}},o.iterate=function(t){for(var e,n,r,o,s,a,c,p=t.gravity,u=t.friction,l=i(this._mp_arr);!(c=l()).done;)for(var d,h=i(c.value);!(d=h()).done;){var f=d.value;e=0,n=p,r=f.exF,o=f.v,s=f.wp,a=f.last_p,e+=r.x,n+=r.y,o.x=(s.x-a.x)*u,o.y=(s.y-a.y)*u,a.x=s.x,a.y=s.y,s.x+=e*u,s.y+=n*u,s.x+=o.x,s.y+=o.y}},o.checkCollidePoly=function(t,e){if(e)for(var n,r=cc.Intersection.pointInPolygon,o=i(this._mp_arr);!(n=o()).done;)for(var s,a=i(n.value);!(s=a()).done;){var c=s.value;r(c.wp,e)&&(c.wp.x=c.last_p.x,c.wp.y=c.last_p.y)}},o.syncLocalToWorld=function(){for(var t,e=this._renderComp,n=i(this._mp_arr);!(t=n()).done;)for(var r,o=i(t.value);!(r=o()).done;){var s=r.value,a=e.node.convertToWorldSpaceAR(s.p);s.wp.x=a.x,s.wp.y=a.y}},r}(cc.Assembler);n.default=c,c.register(a,c),e.exports=n.default,cc._RF.pop()},{"./ClothRenderComp":"ClothRenderComp"}],ClothCollideMgr:[function(t,e){"use strict";function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}cc._RF.push(e,"32304P0HlFKOpw+nKz4QoyY","ClothCollideMgr");var o,s=null;(o=cc.Class({mixins:[cc.EventTarget],properties:{enabled:!1,enabledDrawDebug:!1,_objs:[],_contacts:[]},add:function(t){this.rm(t),this._objs.push(t)},rm:function(t){var e=this._objs.indexOf(t);e>=0&&this._objs.splice(e,1)},update:function(){var t=cc.director.getCollisionManager();if(t)for(var e,i=n(t._colliders);!(e=i()).done;){var r=e.value;this.shouldCollide(r.node,cCloth.node)}},shouldCollide:function(t,e){var n=t.node,i=e.node,r=cc.game.collisionMatrix;return n!==i&&r[n.groupIndex][i.groupIndex]}})).instance=function(){return cc.log("instance"),null==s&&(s=new o,cc.director.getScheduler().enableForTarget(s),cc.director.getScheduler().scheduleUpdate(s,cc.Scheduler.PRIORITY_SYSTEM,!1)),s},cc._RF.pop()},{}],ClothCollider:[function(t,e){"use strict";cc._RF.push(e,"1529eU+xcZF+pV3uQJ7vYXn","ClothCollider");var n=cc.Class({extends:cc.PhysicsCollider,mixins:[cc.Collider.Circle],editor:{menu:"\u67d4\u4f53/\u5e03\u6599\u78b0\u649e",requireComponent:cc.RigidBody},_createShape:function(t){var e=cc.PhysicsTypes.PTM_RATIO,n=Math.abs(t.x),i=Math.abs(t.y),r=this.offset.x/e*n,o=this.offset.y/e*i,s=new b2.CircleShape;return s.m_radius=this.radius/e*n,s.m_p=new b2.Vec2(r,o),s}});cc.PhysicsClothCollider=e.exports=n,cc._RF.pop()},{}],ClothRenderComp:[function(t,e){"use strict";function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}cc._RF.push(e,"5bf56dlubJDu421J+rjZjLY","ClothRenderComp"),t("./ClothCollideMgr");var o=cc.Enum({"\u7ebf\u6027":0,"\u5e38\u91cf":1,"\u5f00\u65b9":2});cc.Class({extends:cc.RenderComponent,mixins:[cc.BlendFunc],editor:!1,ctor:function(){},properties:{preview:{default:!1,editorOnly:!0,notify:!1,animatable:!1},_nGridHorizon:6,nGridHorizon:{displayName:"\u6c34\u5e73\u683c\u70b9\u6570",range:[2,50],step:1,get:function(){return this._nGridHorizon},set:function(t){this._nGridHorizon=t,this.reset()}},_nGridVertical:6,nGridVertical:{displayName:"\u5782\u76f4\u683c\u70b9\u6570",range:[2,50],step:1,get:function(){return this._nGridVertical},set:function(t){this._nGridVertical=t,this.reset()}},_texture:{default:null,type:cc.Texture2D},texture:{type:cc.Texture2D,displayName:"\u7eb9\u7406",get:function(){return this._texture},set:function(t){this._texture=t,this._updateMaterial(),this.reset()}},_gravity:-10,gravity:{displayName:"\u91cd\u529b",get:function(){return this._gravity},set:function(t){this._gravity=t,this.reset()}},_stiffness:.3,stiffness:{displayName:"\u786c\u5ea6",toolTip:"\u786c\u5ea6\u548c\u91cd\u529b\u6709\u8303\u56f4\u5173\u7cfb\uff0c\u4f1a\u6839\u636e\u91cd\u529b\u81ea\u52a8\u77eb\u6b63\u786c\u5ea6\u5230\u5408\u7406\u8303\u56f4",step:.05,get:function(){return this._stiffness},set:function(t){this._stiffness=t,this.reset()}},_friction:1,friction:{displayName:"\u6052\u5b9a\u963b\u529b\u7cfb\u6570",range:[0,1],step:.05,get:function(){return this._friction},set:function(t){this._friction=t,this.reset()}},_iterateTimes:5,iterateTimes:{displayName:"\u8fed\u4ee3\u6b21\u6570",range:[1,20],get:function(){return this._iterateTimes},set:function(t){this._iterateTimes=t,this.reset()}},_fixTL:!1,fixTL:{displayName:"\u56fa\u5b9a\u5de6\u4e0a\u89d2",get:function(){return this._fixTL},set:function(t){this._fixTL=t,this.reset()}},_fixTR:!1,fixTR:{displayName:"\u56fa\u5b9a\u53f3\u4e0a\u89d2",get:function(){return this._fixTR},set:function(t){this._fixTR=t,this.reset()}},_fixBL:!0,fixBL:{displayName:"\u56fa\u5b9a\u5de6\u4e0b\u89d2",get:function(){return this._fixBL},set:function(t){this._fixBL=t,this.reset()}},_fixBR:!0,fixBR:{displayName:"\u56fa\u5b9a\u53f3\u4e0b\u89d2",get:function(){return this._fixBR},set:function(t){this._fixBR=t,this.reset()}},_fixLeft:!1,fixLeft:{displayName:"\u56fa\u5b9a\u5de6\u8fb9\u6cbf",get:function(){return this._fixLeft},set:function(t){this._fixLeft=t,this.reset()}},_fixRight:!1,fixRight:{displayName:"\u56fa\u5b9a\u53f3\u8fb9\u6cbf",get:function(){return this._fixRight},set:function(t){this._fixRight=t,this.reset()}},_fixTop:!0,fixTop:{displayName:"\u56fa\u5b9a\u4e0a\u8fb9\u6cbf",get:function(){return this._fixTop},set:function(t){this._fixTop=t,this.reset()}},_fixBottom:!1,fixBottom:{displayName:"\u56fa\u5b9a\u4e0b\u8fb9\u6cbf",get:function(){return this._fixBottom},set:function(t){this._fixBottom=t,this.reset()}},_keepShape:.3,keepShape:{displayName:"\u4fdd\u6301\u5f62\u72b6\u7cfb\u6570",range:[0,1],get:function(){return this._keepShape},set:function(t){this._keepShape=t,this.reset()}},_keepFunc:o.\u7ebf\u6027,keepFunc:{type:o,displayName:"\u4fdd\u6301\u5f62\u72b6\u51fd\u6570",get:function(){return this._keepFunc},set:function(t){this._keepFunc=t,this.reset()}},_keepShapeMin:.3,keepShapeMin:{displayName:"\u4fdd\u6301\u5f62\u72b6\u6700\u5c0f\u503c",range:[0,1],get:function(){return this._keepShapeMin},set:function(t){this._keepShapeMin=t,this.reset()}},_enableCollider:!1,enableCollider:{displayName:"\u5f00\u59cb\u78b0\u649e\u68c0\u6d4b",get:function(){return this._enableCollider},set:function(t){this._enableCollider=t}}},onEnable:function(){this._super(),this.reset()},lateUpdate:function(t){var e=this._assembler;e&&e.update(this,t),this.checkCollide(),this.setVertsDirty()},_updateMaterial:function(){var t=this.getMaterial(0);t&&t.setProperty("texture",this.texture),cc.BlendFunc.prototype._updateMaterial.call(this)},reset:function(){},onLoad:function(){var t=this._assembler;t&&(t.setGridSize(this._nGridHorizon,this._nGridVertical),t.setPin(this._fixTL,this._fixTR,this._fixBL,this._fixBR,this._fixLeft,this._fixRight,this._fixTop,this._fixBottom))},checkCollide:function(){if(this._enableCollider){var t=cc.director.getCollisionManager(),e=this._assembler;if(t.enabled=!0,t&&e)for(var i,r=n(t._colliders);!(i=r()).done;){var o=i.value;this.shouldCollide(o,this)&&(o instanceof cc.BoxCollider?e.checkCollidePoly(this,o.world.points):o instanceof cc.CircleCollider||o instanceof cc.PolygonCollider&&e.checkCollidePoly(this,o.world.points))}}},shouldCollide:function(t,e){var n=t.node,i=e.node,r=cc.game.collisionMatrix;return n!==i&&r[n.groupIndex][i.groupIndex]}}),cc._RF.pop()},{"./ClothCollideMgr":"ClothCollideMgr"}],CoordUtil:[function(t,e,n){"use strict";cc._RF.push(e,"48f45a5CTtMa61NjxHPEj05","CoordUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.CoordUtil=void 0;var i=function(){function t(){}return t.getPosInCoord=function(t,e){var n=t.convertToWorldSpace(new cc.Vec2(0,0));return e.convertToNodeSpace(n)},t.getGlobalScale=function(t){for(var e=t,n=1;null!=e.parent;)n*=e.scale,e=e.parent;return n},t.reAddToNode=function(t,e){var n=t.convertToWorldSpace(new cc.Vec2(0,0)),i=(e.convertToNodeSpace(n),this.getGlobalScale(t)),r=this.getGlobalScale(e);t.removeFromParent(!1),e.addChild(t),t.scale=i/r},t}();n.CoordUtil=i,cc._RF.pop()},{}],EasyTutorial:[function(t,e,n){"use strict";cc._RF.push(e,"647fbtq2otETYwZEIZewCGY","EasyTutorial"),Object.defineProperty(n,"__esModule",{value:!0}),n.EasyTutorial=void 0;var i=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.finishTutorialEffect=function(t){cc.log("EasyTutorial\u5b8c\u6210\u6548\u679c\u6b65\u9aa4:"+t)},t.prototype.finishTutorialAction=function(t){cc.log("EasyTutorial\u5b8c\u6210\u52a8\u4f5c\u6b65\u9aa4:"+t)},t._instance=null,t}();n.EasyTutorial=i,cc._RF.pop()},{}],EtComponent:[function(t,e,n){"use strict";cc._RF.push(e,"68547jT7+JGCr1JRQ6A4tD4","EtComponent");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.EtComponent=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,p=t("./et.all"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configFile="",e.start_event_nodes=new Array,e.update_event_nodes=new Array,e.touch_event_nodes=new Array,e.config_nodes=new Array,e.touchEnable=!0,e}return r(e,t),e.prototype.loadAsset=function(t){this.doInit(t.json)},e.prototype.start=function(){var t=this;""!=this.configFile&&cc.resources.load(cc.path.mainFileName(this.configFile),function(e,n){var i=n;t.doInit(i.json)})},e.prototype.doInit=function(t){for(var e=t.nodes,n=t.nodeLinks,i={},r=0;r<e.length;++r){var o=e[r],s=p.nodesMap[o.class];cc.log(o.class);var a=new s;a.id=o.id,i[a.id]=a;for(var c=0;c<o.inners.length;++c){var u=o.inners[c];for(var l in u)a[l]=u[l];console.log(u)}console.log("\u751f\u6210\u8282\u70b9\u5b9e\u4f8b",o.class,o.id),o.class.startsWith("\u4e8b\u4ef6/")&&"\u4e8b\u4ef6/\u5f00\u59cb"==o.class&&this.start_event_nodes.push(a),a.init()}for(r=0;r<n.length;++r){var d=n[r],h=d[0],f=d[1],_=i[h[0]],y=i[f[0]],v=_[h[1]],m=y[f[1]];v.addLink(m),m.addLink(v),console.log(_,y)}this.trigger_start_events()},e.prototype.update=function(){this.trigger_update_events()},e.prototype.trigger_start_events=function(){for(var t=0;t<this.start_event_nodes.length;++t)this.start_event_nodes[t].exec(null)},e.prototype.trigger_update_events=function(){for(var t=0;t<this.update_event_nodes.length;++t)this.update_event_nodes[t].exec(null)},e.prototype.trigger_touch_events=function(){},o([c],e.prototype,"configFile",void 0),o([a],e)}(cc.Component);n.EtComponent=u,cc.EtComponent=u,cc._RF.pop()},{"./et.all":"et.all"}],Helloworld:[function(t,e,n){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){cc.debug.setDisplayStats(!1),cc.Canvas.instance.node.runAction(cc.repeatForever(cc.sequence([cc.delayTime(1),cc.callFunc(function(){})])))},e.prototype.update=function(){},o([c(cc.Label)],e.prototype,"label",void 0),o([c],e.prototype,"text",void 0),o([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],NodeUtil:[function(t,e,n){"use strict";cc._RF.push(e,"fcd6bXjiGVELIbnHpgaNLpl","NodeUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.NodeUtil=void 0;var i=function(){function t(){}return t.searchByPrefix=function(t,e,n){this._searchPrefix(t,e,n)},t.searchByUuid=function(t,e){return this._searchUuid(t,e)},t.searchByName=function(t){return this._searchName(t,name)},t._searchUuid=function(t,e){if(t.uuid==e)return t;for(var n=t.children,i=0;i<n.length;++i){var r=n[i],o=this._searchUuid(r,e);if(null!=o)return o}return null},t._searchName=function(t,e){if(t.name==e)return t;for(var n=t.children,i=0;i<n.length;++i){var r=n[i],o=this._searchName(r,e);if(null!=o)return o}return null},t._searchPrefix=function(t,e,n){t.name.startsWith(e)&&n.push(t);for(var i=t.children,r=0;r<i.length;++r){var o=i[r];this._searchPrefix(o,e,n)}},t}();n.NodeUtil=i,cc._RF.pop()},{}],RopeSoftAssembler:[function(t,e,n){"use strict";function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}cc._RF.push(e,"d11e3U2rUdDAoIzJgt4Wr6J","RopeSoftAssembler"),n.__esModule=!0,n.default=void 0;var a=t("./RopeSoftRenderComp"),c=function(t){var e,n;function r(){var e;return(e=t.call(this)||this)._pointsCount=null,e.floatsPerVert=5,e._renderData=null,e._mp_arr=[],e._pinCons=[],e._distCons=[],e._posCons=[],e._extra=0,e._renderData=new cc.RenderData,e._renderData.init(s(e)),e.initData(),e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=r.prototype;return o.init=function(e){t.prototype.init.call(this,e)},o.initData=function(){var t=this.getVfmt();this._renderData.createFlexData(0,20,54,t)},o.setPin=function(t){if(this._pinCons=[],this._mp_arr.length>0){if(t.fixEnd1){var e=this._mp_arr[0];this._pinCons.push({mp:e,pin_pt:new cc.Vec2(e.p.x,e.p.y)})}if(t.fixEnd2){var n=this._mp_arr[this._mp_arr.length-2];this._pinCons.push({mp:n,pin_pt:new cc.Vec2(n.p.x,n.p.y)})}}},o.setPointsCount=function(t){if(this._pointsCount=t,this._pointsCount>1){var e=this._renderComp;if(null!=e.texture){var n=new cc.Size(e.texture.width,e.texture.height),i=new cc.Size(n.width*e.node.scaleX,n.height*e.node.scaleY),r=2*t,o=6*(t-1);this._renderData._flexBuffer.reserve(r,o),this._mp_arr=[];var s,a,c=this._mp_arr,p=e.node.getAnchorPoint(),u=e.node.scaleX,l=e.node.scaleY;e.useTailer?this._extra=1:this._extra=0,0==e.direction?(s=new cc.Vec2(i.width*(.5-p.x)/u,-i.height*p.y/l),a=new cc.Vec2(i.width*(.5-p.x)/u,i.height*(1-p.y)/l),this.isHorizon=!1):1==e.direction&&(s=new cc.Vec2(-i.width*p.x/u,i.height*(.5-p.y)/l),a=new cc.Vec2(i.width*(1-p.x)/u,i.height*(.5-p.y)/l),this.isHorizon=!0),e.node.setContentSize(n);for(var d=0;d<this._pointsCount+this._extra;++d){var h=d/(this._pointsCount-1),f=s.mul(1-h).add(a.mul(h)),_=e.node.convertToWorldSpaceAR(f),y={wp:_,p:f,last_p:new cc.Vec2(_.x,_.y),exF:new cc.Vec2(0,0),v:new cc.Vec2(0,0),normal:new cc.Vec2(0,0),stiff:e.stiffness,fric:e.friction+Math.random()*e.frictionVar-e.frictionVar};c.push(y),d==this._pointsCount&&(y.fric=1)}this.addDistCon(e),this.addPosCon(e),this.calcWorldPoints(),this.saveNormals(e),this.calcNormals(e),this.updateIndices(),this.setPin(e)}}},o.addDistCon=function(t){this._distCons=[];for(var e=this._mp_arr,n=0;n<this._pointsCount-1+this._extra;++n){var i=e[n],r=e[n+1],o=i.wp.sub(r.wp).len(),s=.5*(i.stiff+r.stiff),a=o+t.gravity/s,c=Math.max(a,0);this._distCons.push({mp1:i,mp2:r,dis:c})}},o.addPosCon=function(t){this._posCons=[];var e=this._mp_arr,n=t.keepShape,i=function(e){return(e*(1-t.keepShapeMin)+t.keepShapeMin)*t.keepShape};if(t.fixEnd1)for(var r=0;r<this._pointsCount-1+this._extra;++r){var o=e[r],s=e[r+1],a=s.p.sub(o.p);n=i(n=(1-r/this._pointsCount)*t.keepShape),this._posCons.push({mp1:o,mp2:s,dp:a,el:n})}if(t.fixEnd2)for(var c=this._pointsCount-1+this._extra;c>=1;--c){var p=e[c],u=e[c-1],l=u.p.sub(p.p);n=i(n=c/this._pointsCount*t.keepShape),this._posCons.push({mp1:p,mp2:u,dp:l,el:n})}},o.updateRenderData=function(t){this._renderData._flexBuffer&&t.texture&&this._pointsCount&&(this.calcWorldPoints(),this.calcNormals(t),this.updateWorldVerts(t))},o.updateIndices=function(){var t=this._renderData._flexBuffer;if(t)for(var e=0,n=t.iData,i=0,r=2*this._pointsCount;i<r;i+=2)n[e++]=i,n[e++]=i+2,n[e++]=i+1,n[e++]=i+1,n[e++]=i+2,n[e++]=i+3},o.updateWorldVerts=function(t){var e=this._renderData._flexBuffer;if(e){var n,i=e.vData,r=e.uintVData,o=this.floatsPerVert,s=0;0==t.direction?n=t.texture.width*t.node.scaleX:1==t.direction&&(n=t.texture.height*t.node.scaleY);var a,c,p=.5*n,u=this._pointsCount,l=new cc.Vec2(0,0),d=new cc.Vec2(0,0),h=this._mp_arr,f=4294967295,_=1,y=-1/(u-1);if(this.isHorizon)for(var v=0;v<u;++v)c=(a=h[v]).wp,l.x=c.x+a.normal.x*p,l.y=c.y+a.normal.y*p,d.x=c.x-a.normal.x*p,d.y=c.y-a.normal.y*p,i[s]=l.x,i[s+1]=l.y,i[s+2]=_,i[s+3]=0,r[s+4]=f,i[s+=o]=d.x,i[s+1]=d.y,i[s+2]=_,i[s+3]=1,r[s+4]=f,s+=o,_+=y;else for(var m=0;m<u;++m)c=(a=h[m]).wp,l.x=c.x+a.normal.x*p,l.y=c.y+a.normal.y*p,d.x=c.x-a.normal.x*p,d.y=c.y-a.normal.y*p,i[s]=l.x,i[s+1]=l.y,i[s+2]=0,i[s+3]=_,r[s+4]=f,i[s+=o]=d.x,i[s+1]=d.y,i[s+2]=1,i[s+3]=_,r[s+4]=f,s+=o,_+=y;var g=2*u,x=6*(u-1);e.used(g,x)}},o.saveNormals=function(t){var e,n,i,r,o,s=this._mp_arr;t.fixEnd1&&(r=(e=s[0]).normal,n=e.wp,i=s[1].wp,o=n.sub(i).normalizeSelf(),r.x=o.y,r.y=-o.x)},o.calcNormals=function(t){var e,n,i,r,o,s,a=this._mp_arr,c=a.length;t.fixEnd1||(o=(e=a[0]).normal,i=e.wp,r=a[1].wp,s=i.sub(r).normalizeSelf(),o.x=s.y,o.y=-s.x);for(var p=1;p<c;++p)i=a[p],n=a[p-1],r=a[p+1],o=i.normal,s=n.wp.sub(i.wp).normalizeSelf(),o.x=s.y,o.y=-s.x},o.syncLocalToWorld=function(){for(var t,e=this._renderComp,n=this._mp_arr,i=0;i<n.length;++i){t=n[i];var r=e.node.convertToWorldSpaceAR(t.p);t.wp.x=r.x,t.wp.y=r.y}},o.calcWorldPoints=function(){for(var t,e=this._renderComp,n=this._pinCons,i=0;i<n.length;++i){t=n[i].mp;var r=e.node.convertToWorldSpaceAR(t.p);t.wp.x=r.x,t.wp.y=r.y}},o.fillBuffers=function(t,e){var n=this._renderData._flexBuffer;if(n&&t.texture&&this._pointsCount){var i=n.vData,r=n.usedVertices,o=n.usedIndices,s=n.usedVerticesFloats,a=e._meshBuffer,c=a.request(r,o),p=c.byteOffset>>2,u=a._vData;i.length+p>u.length?u.set(i.subarray(0,s),p):u.set(i,p);for(var l=a._iData,d=n.iData,h=c.indiceOffset,f=c.vertexOffset,_=0,y=d.length;_<y;++_)l[h++]=f+d[_];t.node._renderFlag|=cc.RenderFlow.FLAG_UPDATE_RENDER_DATA}},o.update=function(t,e){this.iterate(t,e),this.dealDistCon(t,e),this.dealPosCon(t,e),this.dealPinCon()},o.dealDistCon=function(t){for(var e,n,r,o,s,a,c,p,u,l,d=Math.sqrt,h=t.iterateTimes,f=1/h,_=0;_<h;++_)for(var y,v=i(this._distCons);!(y=v()).done;){var m=y.value;e=m.mp1,n=m.mp2,r=e.wp,o=n.wp,s=d((u=r.x-o.x)*u+(l=r.y-o.y)*l),c=u*(a=(a=(m.dis-s)/s)*(e.stiff+n.stiff)*.5*f),p=l*a,r.x=r.x+c,r.y=r.y+p,o.x=o.x-c,o.y=o.y-p}},o.dealPosCon=function(t){if(t.keepShape>0)for(var e,n,r,o,s,a,c,p=t.iterateTimes,u=1/p,l=cc.Vec2.transformMat4,d=new cc.Vec2(0,0),h=t.node._worldMatrix,f=0;f<p;++f)for(var _,y=i(this._posCons);!(_=y()).done;){var v=_.value;e=v.mp1,(n=v.mp2).p.x=e.p.x+v.dp.x,n.p.y=e.p.y+v.dp.y,l(d,n.p,h),a=d.x-n.wp.x,c=d.y-n.wp.y,o=a*(r=v.el*u),s=c*r,n.wp.x+=o,n.wp.y+=s}},o.dealPinCon=function(){for(var t,e,n,r=i(this._pinCons);!(n=r()).done;){var o=n.value;t=o.mp.p,e=o.pin_pt,t.x=e.x,t.y=e.y}},o.iterate=function(t){for(var e,n,r,o,s,a,c,p,u=t.gravity,l=i(this._mp_arr);!(p=l()).done;){var d=p.value;e=0,n=u,r=d.exF,o=d.v,s=d.wp,a=d.last_p,e+=r.x,n+=r.y,c=d.fric,o.x=(s.x-a.x)*c,o.y=(s.y-a.y)*c,a.x=s.x,a.y=s.y,s.x+=e*c,s.y+=n*c,s.x+=o.x,s.y+=o.y}},r}(cc.Assembler);n.default=c,c.register(a,c),e.exports=n.default,cc._RF.pop()},{"./RopeSoftRenderComp":"RopeSoftRenderComp"}],RopeSoftRenderComp:[function(t,e){"use strict";cc._RF.push(e,"34011alc3BC9r4RT1g1GYG1","RopeSoftRenderComp");var n=cc.Enum({"\u7eb5\u5411":0,"\u6a2a\u5411":1});cc.Class({extends:cc.RenderComponent,mixins:[cc.BlendFunc],editor:!1,ctor:function(){},properties:{preview:{default:!1,editorOnly:!0,notify:!1,animatable:!1},_pointsCount:6,pointsCount:{displayName:"\u8d28\u70b9\u4e2a\u6570",range:[2,50],step:1,get:function(){return this._pointsCount},set:function(t){this._pointsCount=t,this.reset()}},_direction:n.\u7eb5\u5411,direction:{type:n,displayName:"\u65b9\u5411",get:function(){return this._direction},set:function(t){this._direction=t,this.reset()}},_texture:{default:null,type:cc.Texture2D},texture:{type:cc.Texture2D,displayName:"\u7eb9\u7406",get:function(){return this._texture},set:function(t){this._texture=t,this._updateMaterial(),this.reset()}},_gravity:-10,gravity:{displayName:"\u91cd\u529b",range:[-20,20],get:function(){return this._gravity},set:function(t){this._gravity=t,this.reset()}},_stiffness:.3,stiffness:{displayName:"\u786c\u5ea6",toolTip:"\u786c\u5ea6\u548c\u91cd\u529b\u6709\u8303\u56f4\u5173\u7cfb\uff0c\u4f1a\u6839\u636e\u91cd\u529b\u81ea\u52a8\u77eb\u6b63\u786c\u5ea6\u5230\u5408\u7406\u8303\u56f4",range:[0,1],step:.05,get:function(){return this._stiffness},set:function(t){this._stiffness=t,this.reset()}},_friction:.97,friction:{displayName:"\u6052\u5b9a\u963b\u529b",range:[0,1],step:.05,get:function(){return this._friction},set:function(t){this._friction=t,this.reset()}},_frictionVar:.6,frictionVar:{displayName:"\u6052\u5b9a\u963b\u529b\u968f\u673a\u8303\u56f4",range:[0,1],step:.05,get:function(){return this._frictionVar},set:function(t){this._frictionVar=t,this.reset()}},_iterateTimes:3,iterateTimes:{displayName:"\u8fed\u4ee3\u6b21\u6570",range:[1,20],get:function(){return this._iterateTimes},set:function(t){this._iterateTimes=t,this.reset()}},_fixEnd1:!0,fixEnd1:{displayName:"\u56fa\u5b9a\u8d77\u70b9",get:function(){return this._fixEnd1},set:function(t){this._fixEnd1=t,this.reset()}},_fixEnd2:!1,fixEnd2:{displayName:"\u56fa\u5b9a\u7ec8\u70b9",get:function(){return this._fixEnd2},set:function(t){this._fixEnd2=t,this.reset()}},_keepShape:.3,keepShape:{displayName:"\u4fdd\u6301\u521d\u59cb\u5f62\u72b6\u7cfb\u6570",range:[0,1],get:function(){return this._keepShape},set:function(t){this._keepShape=t,this.reset()}},_keepShapeMin:.3,keepShapeMin:{displayName:"\u4fdd\u6301\u5f62\u72b6\u6700\u5c0f\u503c",range:[0,1],get:function(){return this._keepShapeMin},set:function(t){this._keepShapeMin=t,this.reset()}},_useTailer:!1,useTailer:{displayName:"\u5c3e\u7aef\u4f7f\u7528\u540a\u5760",range:[0,1],get:function(){return this._useTailer},set:function(t){this._useTailer=t,this.reset()}}},onEnable:function(){this._super(),this.reset()},lateUpdate:function(t){var e=this._assembler;e&&e.update(this,t),this.setVertsDirty()},_updateMaterial:function(){var t=this.getMaterial(0);t&&t.setProperty("texture",this.texture),cc.BlendFunc.prototype._updateMaterial.call(this)},reset:function(){},onLoad:function(){var t=this._assembler;t&&(t.setPointsCount(this._pointsCount),t.setPin(this))}}),cc._RF.pop()},{}],SpineDynamicBone:[function(t,e){"use strict";function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}cc._RF.push(e,"69662og4jhFgrf6sbwxG1MX","SpineDynamicBone");var o=function(t,e){this.origLocalPos=void 0,this.origRotation=void 0,this.worldPos=void 0,this.prevWorldPos=void 0,this.localPos=void 0,this.v=void 0,this.a=void 0,this.bone=void 0,this.parentBone=void 0,this.parentMp=void 0,this.isPin=void 0,this.bone=t,this.parentMp=e,this.origLocalPos={x:t.x,y:t.y},this.localPos={x:t.x,y:t.y};var n={x:t.x,y:t.y};t.localToWorld(n),this.worldPos={x:n.x,y:n.y},this.prevWorldPos={x:n.x,y:n.y},this.origRotation=t.rotation,this.a={x:0,y:0},this.v={x:0,y:0},t.parent?this.parentBone=t.parent:this.parentBone=t},s=function(t){this.pinedLocalPos=void 0,this.mp=void 0,this.mp=t,this.pinedLocalPos={x:t.bone.x,y:t.bone.y},t.isPin=!0},a=function(t,e){this.distance=void 0,this.mp=void 0,this.mp_parent=void 0,this.mp=t,this.mp_parent=e;var n=t.bone.worldX-e.bone.worldX,i=t.bone.worldY-e.bone.worldY;this.distance=Math.sqrt(n*n+i*i)},c=function(t,e){this.dstPos=void 0,this.mp=void 0,this.mp_parent=void 0,this.mp=t,this.mp_parent=e,this.dstPos={x:t.bone.x,y:t.bone.y}};cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,executionOrder:10},properties:{enableUpdate:{default:!0},t:{default:0,visible:!1},_massPoints:{default:[],visible:!1},_pinCons:{default:[],visible:!1},_posCons:{default:[],visible:!1},_distCons:{default:[],visible:!1},_keepShape:.3,keepShape:{displayName:"\u4fdd\u6301\u521d\u59cb\u5f62\u72b6\u7cfb\u6570",range:[0,1],step:.05,get:function(){return this._keepShape},set:function(t){this._keepShape=t}},_stiffness:.3,stiffness:{displayName:"\u786c\u5ea6",toolTip:"\u786c\u5ea6\u548c\u91cd\u529b\u6709\u8303\u56f4\u5173\u7cfb\uff0c\u4f1a\u6839\u636e\u91cd\u529b\u81ea\u52a8\u77eb\u6b63\u786c\u5ea6\u5230\u5408\u7406\u8303\u56f4",range:[0,1],step:.05,get:function(){return this._stiffness},set:function(t){this._stiffness=t}},_rootBoneName:"",rootBoneName:{displayName:"spine\u6839\u9aa8\u9abc",toolTip:"\u6839\u9aa8\u9abc\u4e0b\u7684\u6240\u6709\u5b50\u9aa8\u9abc\u4f1a\u6dfb\u52a0\u67d4\u4f53\u6548\u679c",get:function(){return this._rootBoneName},set:function(t){this._rootBoneName=t,this.init()}}},onLoad:function(){this.init()},init:function(){this.t=0,this._massPoints=[],this._pinCons=[],this._posCons=[],this._distCons=[];var t=this.node.getComponent(sp.Skeleton);t._skeleton.updateWorldTransform();var e=t.findBone(this._rootBoneName);null!=e&&(this.addMassPoints(e,null),this.addPinCons(),this.addPosCons(),this.addDistCons())},onEnable:function(){this.init()},start:function(){},addMassPoints:function(t,e){var i=new o(t,e);this._massPoints.push(i);for(var r,s=n(t.children);!(r=s()).done;){var a=r.value;this.addMassPoints(a,i)}},addPinCons:function(){if(this._massPoints.length>0){var t=new s(this._massPoints[0]);this._pinCons.push(t)}},addPosCons:function(){for(var t,e=n(this._massPoints);!(t=e()).done;){var i=t.value;if(i.parentMp){var r=new c(i,i.parentMp);this._posCons.push(r)}}},addDistCons:function(){for(var t,e=n(this._massPoints);!(t=e()).done;){var i=t.value;if(i.parentMp){var r=new a(i,i.parentMp);this._distCons.push(r)}}},dealPinCons:function(){for(var t,e=n(this._pinCons);!(t=e()).done;){var i=t.value;i.mp.bone.x=i.pinedLocalPos.x,i.mp.bone.y=i.pinedLocalPos.y}},dealPosCons:function(t,e){for(var i,r,o,s,a,c,p={x:0,y:0},u=this._keepShape/e,l=n(this._posCons);!(c=l()).done;){var d=c.value;a=d.dstPos,s=(o=d.mp).worldPos,p.x=a.x,p.y=a.y,o.parentBone.localToWorld(p),i=p.x-s.x,r=p.y-s.y,s.x+=i*u,s.y+=r*u}},dealDistCons:function(){for(var t,e,i,r,o,s,a,c,p,u,l,d=Math.sqrt,h=this._stiffness,f=n(this._distCons);!(l=f()).done;){var _=l.value;i=_.mp,r=_.mp_parent,o=i.worldPos,a=d((t=(s=r.worldPos).x-o.x)*t+(e=s.y-o.y)*e),p=(c=(_.distance-a)/a*h)*t,u=c*e,o.x-=p,o.y-=u,s.x+=p,s.y+=u}},update:function(t){if(this.enableUpdate){this.t+=t,this.iterate(t);for(var e=0;e<15;++e)this.dealDistCons(t,15),this.dealPosCons(t,15);this.dealPinCons(t),this.syncToNodes()}else for(var i,r=n(this._massPoints);!(i=r()).done;){var o=i.value;o.worldPos.x=o.bone.worldX,o.worldPos.y=o.bone.worldY,o.prevWorldPos.x=o.bone.worldX,o.prevWorldPos.y=o.bone.worldY}},iterate:function(){for(var t,e,i,r,o={x:0,y:0},s=n(this._massPoints);!(r=s()).done;){var a=r.value;o.x=0,o.y=-.049,t=a.worldPos,e=a.prevWorldPos,o=a.a,(i=a.v).x=.9*(t.x-e.x),i.y=.9*(t.y-e.y),i.z=.9*(t.z-e.z),e.x=t.x,e.y=t.y,t.x+=.9*o.x,t.y+=.9*o.y,t.x+=i.x,t.y+=i.y}},syncToNodes:function(){for(var t,e,i={x:0,y:0},r=n(this._massPoints);!(e=r()).done;){var o=e.value;t=o.worldPos,o.isPin||(i.x=t.x,i.y=t.y,o.parentBone.worldToLocal(i),o.bone.x=i.x,o.bone.y=i.y)}}}),cc._RF.pop()},{}],SpineUtil:[function(t,e,n){"use strict";cc._RF.push(e,"1d992KwiO5LGpf+m0I/OJKm","SpineUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.SpineUtil=void 0;var i=function(){function t(){}return t.getBones=function(t,e){for(var n=[],i=0;i<10;i++){var r=e+i,o=t.findBone(r);o&&(o.m_name=r,n.push(o))}return n},t.setBoneVisble=function(t,e,n,i){if(void 0===i&&(i=!0),i)for(var r=t.findBone(e),o=0;o<r.children.length;o++){var s=r.children[o];this.setBoneVisble(t,s.data.name,n)}var a=t.skeletonData.skeletonJson.slots;if(a){for(var c=[],p=[],u=0,l=a;u<l.length;u++){var d=l[u];d.bone==e&&(c.push(d.name),p.push(d.attachment))}for(o=0;o<c.length;o++){var h=c[o],f=p[o],_=t.findSlot(h),y=null;if(n){var v=t.skeletonData.getRuntimeData(),m=v.findSlotIndex(h);y=v.findSkin("default").getAttachment(m,f)}_.setAttachment(y)}}},t.getBoneWorldPos=function(t,e,n){void 0===n&&(n=cc.Canvas.instance.node);var i=t.findBone(e);if(i){var r=cc.v2(i.worldX,i.worldY),o=t.node.convertToWorldSpaceAR(cc.v2(0,0));return n.convertToNodeSpaceAR(o).add(r)}return null},t}();n.SpineUtil=i,cc._RF.pop()},{}],Wind:[function(t,e){"use strict";function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}cc._RF.push(e,"f787fssvOxM578LNYQmQMFI","Wind");var o=t("./noise"),s=t("../cloth/ClothRenderComp"),a=t("../rope/RopeSoftRenderComp");cc.Class({extends:cc.Component,editor:!1,ctor:function(){},properties:{_directionNormalied:new cc.Vec2(1,0),_direction:new cc.Vec2(1,0),diretion:{displayName:"\u65b9\u5411",get:function(){return this._direction},set:function(t){this._direction=t,this._directionNormalied=t.normalize(),this.reset()}},_strength:1,strength:{displayName:"\u73af\u5883\u98ce\u5f3a\u5ea6",get:function(){return this._strength},set:function(t){this._strength=t,this.reset()}},_dirStrength:1,dirStrength:{displayName:"\u65b9\u5411\u98ce\u5f3a\u5ea6",get:function(){return this._dirStrength},set:function(t){this._dirStrength=t,this.reset()}},_turbulence:1,turbulence:{displayName:"\u6e4d\u6d41",get:function(){return this._turbulence},set:function(t){this._turbulence=t,this.reset()}},_directionRandom:.5,directionRandom:{displayName:"\u968f\u673a\u65b9\u5411\u7cfb\u6570",get:function(){return this._directionRandom},set:function(t){this._directionRandom=t,this.reset()}},_directionChangeSpeed:.5,directionChangeSpeed:{displayName:"\u65b9\u5411\u53d8\u5316\u901f\u5ea6",get:function(){return this._directionChangeSpeed},set:function(t){this._directionChangeSpeed=t,this.reset()}},_windPrecision:1,windPrecision:{displayName:"\u98ce\u529b\u91c7\u6837\u7cbe\u5ea6",get:function(){return this._windPrecision},set:function(t){this._windPrecision=t,this.reset()}}},onLoad:function(){this._t=0,this._tSign=1},update:function(t){this._t+=t,(this._t>9e7||this._t<0)&&(this._tSign=-this._tSign);var e=this.node.getComponent(s);e&&this.applyGrid(e._assembler._mp_arr);var n=this.node.getComponent(a);n&&this.applyLine(n._assembler._mp_arr)},reset:function(){var t=this.node.getComponent(s);t&&t.reset();var e=this.node.getComponent(a);e&&e.reset()},applyGrid:function(t){for(var e,i,r,s,a,c,p=this._t,u=this._windPrecision,l=this._strength,d=this._dirStrength,h=this._directionNormalied,f=o.get,_=n(t);!(c=_()).done;)for(var y,v=n(c.value);!(y=v()).done;){var m=y.value;e=m.exF,r=f(p+(s=m.wp.x)*u,p+(a=m.wp.y)*u)+1,i=f(p+a*u,p+s*u)+1,e.x=f(p+s*u,p+a*u)*l+h.x*d*r,e.y=f(p+a*u,p+s*u)*l+h.y*d*i}},applyLine:function(t){for(var e,i,r,s,a,c,p=this._t,u=this._windPrecision,l=this._strength,d=this._dirStrength,h=this._directionNormalied,f=o.get,_=n(t);!(c=_()).done;){var y=c.value;e=y.exF,r=f(p+(s=y.wp.x)*u,p+(a=y.wp.y)*u)+1,i=f(p+a*u,p+s*u)+1,e.x=f(p+s*u,p+a*u)*l+h.x*d*r,e.y=f(p+a*u,p+s*u)*l+h.y*d*i}}}),cc._RF.pop()},{"../cloth/ClothRenderComp":"ClothRenderComp","../rope/RopeSoftRenderComp":"RopeSoftRenderComp","./noise":"noise"}],"et.Decorator":[function(t,e,n){"use strict";cc._RF.push(e,"de26eu3AvVH15zR5HwdX+aQ","et.Decorator"),Object.defineProperty(n,"__esModule",{value:!0}),n.et_output=n.et_inner=n.et_input=n.etclass=n.etBase=n.etSlot=void 0;var i="input",r="inner",o="output",s=function(){function t(t,e){this.links=new Array,this.object=t,this.name=e}return t.prototype.addLink=function(t){this.links.push(t)},t.prototype.execLinks=function(){for(var t=0,e=this.links;t<e.length;t++){var n=e[t];n.object.exec(n)}},t}();n.etSlot=s;var a=function(){function t(){this.raw={};for(var t=this.constructor,e=u.get(t),n=this,i=function(t){Object.defineProperty(n,t.name,{get:function(){return n.raw[t.name]},set:function(e){n.raw[t.name]=e}}),r[t.name]=new s(r,t.name)},r=this,o=0,a=e.props;o<a.length;o++)i(a[o])}return t.prototype.init=function(){},t.prototype.exec=function(){},t}();n.etBase=a;var c=function(t,e,n,i,r){this.prop_type=e,this.name=n,this.tip=i,this.tooltip=r},p=function(){function t(){this.props=new Array}return t.prototype.setConfig=function(t,e,n){this.name=t,this.tip=e,this.tooltip=n},t.prototype.addProp=function(t){this.props.push(t)},t}(),u=new Map;n.etclass=function(t,e,n){return function(i){u.get(i).setConfig(t,e,n)}},n.et_input=function(t,e,n){return function(r,o){console.log("vpprop register property",r.constructor.name,r,o),u.has(r.constructor)||u.set(r.constructor,new p),u.get(r.constructor).addProp(new c(i,t,o,e,n))}},n.et_inner=function(t,e,n){return function(i,o){console.log("vpprop register property",i.constructor.name,i,o),u.has(i.constructor)||u.set(i.constructor,new p),u.get(i.constructor).addProp(new c(r,t,o,e,n))}},n.et_output=function(t,e,n){return function(i,r){console.log("vpprop register property",i.constructor.name,i,r),u.has(i.constructor)||u.set(i.constructor,new p),u.get(i.constructor).addProp(new c(o,t,r,e,n))}},cc._RF.pop()},{}],"et.ITouch":[function(t,e,n){"use strict";cc._RF.push(e,"d22bfrv7wJIkJkGSGLpl+Ch","et.ITouch"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"et.actions.enter_scene":[function(t,e,n){"use strict";cc._RF.push(e,"13475kDpPRNtqvRV5/M81T1","et.actions.enter_scene");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.enter_scene=void 0;var s=t("../../base/et.Decorator"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){},e.prototype.exec=function(){},o([s.et_input("\u5f00\u59cb","\u5f00\u59cb","\u5f00\u59cb")],e.prototype,"object",void 0),o([s.et_inner("string","\u573a\u666f\u540d","\u573a\u666f\u540d")],e.prototype,"text",void 0),o([s.et_output("event","\u4e0b\u4e00\u6b65","\u4e0b\u4e00\u6b65")],e.prototype,"finishEvent",void 0),o([s.etclass("\u52a8\u4f5c/\u8fdb\u5165\u573a\u666f","\u8fdb\u5165\u573a\u666f","\u8fdb\u5165\u573a\u666f")],e)}(s.etBase);n.enter_scene=a,cc._RF.pop()},{"../../base/et.Decorator":"et.Decorator"}],"et.actions.guide_with_bubble_text":[function(t,e,n){"use strict";cc._RF.push(e,"2d167ZBgt1J9KTUQDCi3pFn","et.actions.guide_with_bubble_text");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.guide_with_bubble_text=void 0;var s=t("../../base/et.Decorator"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){},e.prototype.exec=function(){},o([s.et_input("\u5f00\u59cb","\u5f00\u59cb","\u5f00\u59cb")],e.prototype,"object",void 0),o([s.et_inner("ccnode","\u8282\u70b9uuid","\u8282\u70b9uuid \u6216\u8005 \u8282\u70b9\u540d \u4e8c\u9009\u4e00")],e.prototype,"nodeUuid",void 0),o([s.et_inner("ccnode","\u8282\u70b9\u540d","\u8282\u70b9uuid \u6216\u8005 \u8282\u70b9\u540d \u4e8c\u9009\u4e00,\u8282\u70b9\u540d\u4e0d\u5bb9\u6613\u53d7\u4fee\u6539\u5e72\u6270")],e.prototype,"nodeName",void 0),o([s.et_inner("string","\u5f15\u5bfc\u6587\u5b57","\u5f15\u5bfc\u6587\u5b57")],e.prototype,"text",void 0),o([s.et_output("event","\u4e0b\u4e00\u6b65","\u4e0b\u4e00\u6b65")],e.prototype,"finishEvent",void 0),o([s.etclass("\u52a8\u4f5c/\u6c14\u6ce1","\u6c14\u6ce1","\u6c14\u6ce1")],e)}(s.etBase);n.guide_with_bubble_text=a,cc._RF.pop()},{"../../base/et.Decorator":"et.Decorator"}],"et.actions.guide_with_captions":[function(t,e,n){"use strict";cc._RF.push(e,"e40edHnqQRFFrG4wLoYrSvN","et.actions.guide_with_captions");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.guide_with_captions=void 0;var s=t("../../base/et.Decorator"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){},e.prototype.exec=function(){},o([s.et_input("\u5f00\u59cb","\u5f00\u59cb","\u5f00\u59cb")],e.prototype,"object",void 0),o([s.et_inner("string","\u5f15\u5bfc\u6587\u5b57","\u5f15\u5bfc\u6587\u5b57")],e.prototype,"text",void 0),o([s.et_output("event","\u4e0b\u4e00\u6b65","\u4e0b\u4e00\u6b65")],e.prototype,"finishEvent",void 0),o([s.etclass("\u52a8\u4f5c/\u5b57\u5e55","\u5b57\u5e55","\u5b57\u5e55")],e)}(s.etBase);n.guide_with_captions=a,cc._RF.pop()},{"../../base/et.Decorator":"et.Decorator"}],"et.actions.guide_with_handclick":[function(t,e,n){"use strict";cc._RF.push(e,"d9b9cyNvjBIR7DNp/xERSez","et.actions.guide_with_handclick");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.guide_with_handclick=void 0;var s=t("../../base/et.Decorator"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){},e.prototype.exec=function(){},o([s.et_input("\u5f00\u59cb","\u5f00\u59cb","\u5f00\u59cb")],e.prototype,"object",void 0),o([s.et_inner("ccnode","\u8282\u70b9uuid","\u8282\u70b9uuid \u6216\u8005 \u8282\u70b9\u540d \u4e8c\u9009\u4e00")],e.prototype,"nodeUuid",void 0),o([s.et_inner("ccnode","\u8282\u70b9\u540d","\u8282\u70b9uuid \u6216\u8005 \u8282\u70b9\u540d \u4e8c\u9009\u4e00,\u8282\u70b9\u540d\u4e0d\u5bb9\u6613\u53d7\u4fee\u6539\u5e72\u6270")],e.prototype,"nodeName",void 0),o([s.et_inner("float","\u70b9\u51fb\u65f6\u95f4\u95f4\u9694","\u70b9\u51fb\u65f6\u95f4\u95f4\u9694")],e.prototype,"anim_type",void 0),o([s.et_output("event","\u4e0b\u4e00\u6b65","\u4e0b\u4e00\u6b65")],e.prototype,"finishEvent",void 0),o([s.etclass("\u52a8\u4f5c/\u5c0f\u624b\u70b9\u51fb","\u5c0f\u624b\u70b9\u51fb","\u5c0f\u624b\u70b9\u51fb")],e)}(s.etBase);n.guide_with_handclick=a,cc._RF.pop()},{"../../base/et.Decorator":"et.Decorator"}],"et.actions.guide_with_mask":[function(t,e,n){"use strict";cc._RF.push(e,"5df25E1AdZEC7bhRe99J3xD","et.actions.guide_with_mask");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.guide_with_mask=void 0;var s=t("../../base/et.Decorator"),a=t("../../utils/NodeUtil"),c=t("../../EasyTutorial"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){},e.prototype.exec=function(){var t=null;""!=this.nodeUuid&&(t=a.NodeUtil.searchByUuid(cc.Canvas.instance.node,this.nodeUuid)),""!=this.nodeName&&(t=a.NodeUtil.searchByName(cc.Canvas.instance.node,this.nodeName)),null!=t&&this.captureGlobal(t)},e.prototype.scaleMaskToTarget=function(t,e,n,i){var r,o=e.scale,s=t.getComponent(cc.Camera),a=n.getComponent(cc.Sprite),c=0;r=function(n){if((c+=n)<=.8){var p=o+10*(1-c/.8);e.scale=p,s.render(),e.scale=o}else a.unschedule(r),t.active=!1,t.removeFromParent(!0),null!=i&&i()},a.schedule(r)},e.prototype.blinkMaskAtTarget=function(t,e,n){var i=e.scale,r=t.getComponent(cc.Camera),o=n.getComponent(cc.Sprite),s=0;o.schedule(function(t){s+=t;var n=i+.15*(Math.sin(5*s)+1);e.scale=n,r.render(),e.scale=i})},e.prototype.captureGlobal=function(t){var e=this,n=cc.director.getScene(),i=new cc.RenderTexture,r=new cc.Node;r.name="temp_cam_node",r.setPosition(cc.visibleRect.center),n.addChild(r),i.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8);var o=r.addComponent(cc.Camera);o.targetTexture=i,o.node=t,o.enabled=!0,o.alignWithScreen=!0,o.clearFlags=cc.Camera.ClearFlags.COLOR,o.backgroundColor=cc.color(0,0,0,105),o.cullingMask=1<<30,t.groupIndex=30,o.render();var s=new cc.Node;s.scaleY=-1,s.name="captured_target_node";var a=s.addComponent(cc.Sprite),p=new cc.SpriteFrame;p.setTexture(i),a.spriteFrame=p,s.zIndex=cc.macro.MAX_ZINDEX,cc.director.getScene().addChild(s),s.setPosition(cc.visibleRect.center),cc.log("KKKKKK1!");var u=cc.path.mainFileName("EasyTutorial/materials/InvertMaskBlurEffect.effect");cc.resources.load(u,function(n,i){cc.log("AAAABBBBBB!");var o=cc.Material.create(i),a=s.getComponent(cc.Sprite);a.setMaterial(0,o);var p=a.spriteFrame.getTexture();o.setProperty("texture",p);var u=cc.director.getWinSizeInPixels();o.setProperty("pixelSizeX",1/u.width*3),o.setProperty("pixelSizeY",1/u.height*3),"\u7f29\u5c0f\u5230"==e.anim_type?e.scaleMaskToTarget(r,t,s,function(){c.EasyTutorial.instance.finishTutorialEffect(e.stepName)}):"\u95ea\u70c1"==e.anim_type?(e.blinkMaskAtTarget(r,t,s),c.EasyTutorial.instance.finishTutorialEffect(e.stepName)):"\u7f29\u5c0f\u5230\u5e76\u95ea\u70c1"==e.anim_type&&e.scaleMaskToTarget(r,t,s,function(){e.blinkMaskAtTarget(r,t,s),c.EasyTutorial.instance.finishTutorialEffect(e.stepName)})})},e.prototype.captureLocal=function(t){var e=new cc.RenderTexture,n=t.getBoundingBoxToWorld(),i=t.convertToWorldSpaceAR(new cc.Vec2(0,0));e.initWithSize(n.width,n.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8);var r=t.addComponent(cc.Camera);r.targetTexture=e,r.node=t,r.enabled=!0,r.zoomRatio=2,r.alignWithScreen=!0,r.render(t),t.active=!1;var o=new cc.Node;o.scaleY=-1,o.name="capture_node";var s=o.addComponent(cc.Sprite),a=new cc.SpriteFrame;a.setTexture(e),s.spriteFrame=a,cc.sys.isNative&&(o.rotation=t.rotation),o.zIndex=cc.macro.MAX_ZINDEX,cc.director.getScene().addChild(o),o.setPosition(i)},o([s.et_input("\u5f00\u59cb","\u5f00\u59cb","\u5f00\u59cb")],e.prototype,"object",void 0),o([s.et_inner("ccnode","\u8282\u70b9uuid","\u8282\u70b9uuid \u6216\u8005 \u8282\u70b9\u540d \u4e8c\u9009\u4e00")],e.prototype,"nodeUuid",void 0),o([s.et_inner("ccnode","\u8282\u70b9\u540d","\u8282\u70b9uuid \u6216\u8005 \u8282\u70b9\u540d \u4e8c\u9009\u4e00,\u8282\u70b9\u540d\u4e0d\u5bb9\u6613\u53d7\u4fee\u6539\u5e72\u6270")],e.prototype,"nodeName",void 0),o([s.et_inner("enum:\u666e\u901a,\u95ea\u70c1,\u7f29\u5c0f\u5230,\u7f29\u5c0f\u5230\u5e76\u95ea\u70c1","\u52a8\u753b\u5f62\u5f0f","\u52a8\u753b\u5f62\u5f0f")],e.prototype,"anim_type",void 0),o([s.et_inner("string","\u6b65\u9aa4\u540d","\u6b65\u9aa4\u540d")],e.prototype,"stepName",void 0),o([s.et_output("event","\u4e0b\u4e00\u6b65","\u4e0b\u4e00\u6b65")],e.prototype,"finishEvent",void 0),o([s.etclass("\u52a8\u4f5c/\u906e\u7f69","\u906e\u7f69","\u906e\u7f69")],e)}(s.etBase);n.guide_with_mask=p,cc._RF.pop()},{"../../EasyTutorial":"EasyTutorial","../../base/et.Decorator":"et.Decorator","../../utils/NodeUtil":"NodeUtil"}],"et.actions.start_event":[function(t,e,n){"use strict";cc._RF.push(e,"fc697n9bzJD9ok3AkhggdPS","et.actions.start_event");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.start_event=void 0;var s=t("../../base/et.Decorator"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){},e.prototype.exec=function(){cc.log("start"),this.event.execLinks()},o([s.et_output("event","\u4e0b\u4e00\u6b65","\u4e0b\u4e00\u6b65")],e.prototype,"event",void 0),o([s.etclass("\u4e8b\u4ef6/\u5f00\u59cb","\u5f00\u59cb","\u5f00\u59cb")],e)}(s.etBase);n.start_event=a,cc._RF.pop()},{"../../base/et.Decorator":"et.Decorator"}],"et.all":[function(t,e,n){"use strict";cc._RF.push(e,"e98ea5Fe5NPI6Osf3NXHPer","et.all"),Object.defineProperty(n,"__esModule",{value:!0}),n.nodesMap=void 0;var i=t("./nodes/actions/et.actions.enter_scene"),r=t("./nodes/actions/et.actions.guide_with_bubble_text"),o=t("./nodes/actions/et.actions.guide_with_captions"),s=t("./nodes/actions/et.actions.guide_with_handclick"),a=t("./nodes/actions/et.actions.guide_with_mask"),c=t("./nodes/events/et.actions.start_event");n.nodesMap=new Map,n.nodesMap["\u52a8\u4f5c/\u8fdb\u5165\u573a\u666f"]=i.enter_scene,n.nodesMap["\u52a8\u4f5c/\u6c14\u6ce1"]=r.guide_with_bubble_text,n.nodesMap["\u52a8\u4f5c/\u5b57\u5e55"]=o.guide_with_captions,n.nodesMap["\u52a8\u4f5c/\u5c0f\u624b\u70b9\u51fb"]=s.guide_with_handclick,n.nodesMap["\u52a8\u4f5c/\u906e\u7f69"]=a.guide_with_mask,n.nodesMap["\u4e8b\u4ef6/\u5f00\u59cb"]=c.start_event,cc._RF.pop()},{"./nodes/actions/et.actions.enter_scene":"et.actions.enter_scene","./nodes/actions/et.actions.guide_with_bubble_text":"et.actions.guide_with_bubble_text","./nodes/actions/et.actions.guide_with_captions":"et.actions.guide_with_captions","./nodes/actions/et.actions.guide_with_handclick":"et.actions.guide_with_handclick","./nodes/actions/et.actions.guide_with_mask":"et.actions.guide_with_mask","./nodes/events/et.actions.start_event":"et.actions.start_event"}],noise:[function(t,e){"use strict";cc._RF.push(e,"a877aZDYABNkJp/ZYzS6G1+","noise");var n=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151,160,137,91,90,15,151],i=function(t,e,n){return(0==(1&t)?e:-e)+(0==(2&t)?n:-n)},r=function(t,e,n){return e+t*(n-e)},o={get:function(t,e){var o=Math.floor,s=(Math.abs,o(t)),a=o(e),c=t-s,p=e-a,u=c*c*(3-2*c),l=n[s&=255]+(a&=255)&255,d=n[s+1]+a&255;return r(p*p*(3-2*p),r(u,i(n[l],c,p),i(n[d],c-1,p)),r(u,i(n[l+1],c,p-1),i(n[d+1],c-1,p-1)))}};e.exports=o,cc._RF.pop()},{}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"c8a849HJd5E57DCBlsRxbgF","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["Helloworld","EasyTutorial","EtComponent","et.Decorator","et.ITouch","et.all","et.actions.enter_scene","et.actions.guide_with_bubble_text","et.actions.guide_with_captions","et.actions.guide_with_handclick","et.actions.guide_with_mask","et.actions.start_event","CoordUtil","NodeUtil","SpineUtil","ClothAssembler","ClothCollideMgr","ClothCollider","ClothRenderComp","Wind","noise","RopeSoftAssembler","RopeSoftRenderComp","SpineDynamicBone","use_reversed_rotateBy"]);